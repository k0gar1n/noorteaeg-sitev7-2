<!doctype html><html lang="ru"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Roheline Start — MTÜ Noorteaeg</title>
<link rel="stylesheet" href="../assets/site.css">
<script src="https://cdn.tailwindcss.com"></script>
</head><body class="bg-gray-50 text-gray-900">
<header class="border-b bg-white">
  <div class="max-w-5xl mx-auto px-4 py-3 flex items-center justify-between">
    <a href="../index.html#projects" class="text-blue-600" data-i18n="back_to_projects">← Назад к проектам</a>
    <a href="../index.html" class="font-semibold">MTÜ Noorteaeg</a>
  </div>
</header>

<main class="max-w-5xl mx-auto px-4 py-10">
  <h1 class="text-3xl font-bold" data-i18n="proj_roheline_title">Roheline Start – perepäev Narva-Jõesuus</h1>
  <p class="mt-4 leading-relaxed" data-i18n="proj_roheline_desc">
    Большой семейный день в парке…
  </p>

  <section class="mt-8">
    <h2 class="text-2xl font-semibold" data-i18n="photos_title">Фотографии</h2>
    <div id="gallery" class="grid grid-cols-2 md:grid-cols-3 gap-3 mt-4"></div>
  </section>
</main>

<div id="lightbox" class="lightbox-backdrop" aria-hidden="true">
  <span class="lightbox-close" id="lb-close">×</span>
  <span class="lightbox-nav lightbox-prev" id="lb-prev">‹</span>
  <img class="lightbox-img" id="lb-img">
  <span class="lightbox-nav lightbox-next" id="lb-next">›</span>
</div>

<script>
const DICT={
  ru:{
    back_to_projects:"← Назад к проектам",
    photos_title:"Фотографии",
    proj_roheline_title:"Roheline Start – perepäev Narva-Jõesuus",
    proj_roheline_desc:"Большой семейный день: спорт-зоны, творческие мастер-классы, настольные игры, ярмарка обмена вещами. Участие бесплатное; материалы предоставляет команда."
  },
  et:{
    back_to_projects:"← Tagasi projektide juurde",
    photos_title:"Fotod",
    proj_roheline_title:"Roheline Start – perepäev Narva-Jõesuus",
    proj_roheline_desc:"Suur perepäev pargis: spordialad, loovad töötoad, lauamängud ja asjade vahetuslaat. Osalemine tasuta; materjalid toob korraldustiim."
  }
};
function applyI18n(){
  const lang=localStorage.getItem('lang')||'ru';
  document.documentElement.lang=lang;
  document.querySelectorAll('[data-i18n]').forEach(el=>{
    const k=el.getAttribute('data-i18n');
    el.textContent=(DICT[lang]&&DICT[lang][k])||el.textContent;
  });
}
applyI18n();
</script>
<script>
// 1) Опиши наборы фотографий
//   path: папка (относительно этой страницы)
//   from..to: диапазон номеров (включительно). from может быть больше to.
const sets = [
  { path: "../assets/roheline-start-2/", from: 35, to: 20 },
  { path: "../assets/roheline-start/",  from: 19, to: 1  }
];

// 2) Допустимые расширения (оставь "jpg" если все jpg)
const exts = ["jpg","jpeg","png","webp"];

// 3) Сгенерировать <img>
const box = document.getElementById("gallery");
for (const s of sets) {
  const step = s.from >= s.to ? -1 : 1;
  for (let n = s.from; step<0 ? n>=s.to : n<=s.to; n+=step) {
    let el = document.createElement("img");
    el.className = "rounded-lg img-card lb-gallery";
    el.loading = "lazy";
    el.decoding = "async";
    el.alt = "";
    // пробуем несколько расширений (первое подходящее загрузится)
    el.src = s.path + n + ".jpg";
    el.onerror = function tryNext() {
      // по очереди пробуем другие расширения
      const cur = exts.indexOf((this.src.split(".").pop()||"").toLowerCase());
      for (let i=0;i<exts.length;i++){
        const next = exts[(cur+1+i)%exts.length];
        const candidate = s.path + n + "." + next;
        if (candidate !== this.src) { this.onerror=null; this.src=candidate; break; }
      }
    };
    box.appendChild(el);
  }
}
</script>

<script>
/* lightbox как выше */
const lb=document.getElementById('lightbox'),img=document.getElementById('lb-img');
const prev=document.getElementById('lb-prev'),next=document.getElementById('lb-next');
let list=[...document.querySelectorAll('img.lb-gallery')].map(i=>i.src),idx=0;
function openL(src){idx=list.indexOf(src);if(idx<0)idx=0;img.src=list[idx];lb.classList.add('open')}
document.body.addEventListener('click',e=>{if(e.target.matches('img.lb-gallery'))openL(e.target.src);if(e.target===lb)lb.classList.remove('open')});
prev.onclick=()=>{idx=(idx-1+list.length)%list.length;img.src=list[idx]};
next.onclick=()=>{idx=(idx+1)%list.length;img.src=list[idx]};
document.addEventListener('keydown',e=>{if(!lb.classList.contains('open'))return;if(e.key==='Escape')lb.classList.remove('open');if(e.key==='ArrowLeft')prev.onclick();if(e.key==='ArrowRight')next.onclick()});
</script>
</body></html>
